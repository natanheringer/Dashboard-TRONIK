{% extends "base.html" %}

{% block title %}Dashboard-TRONIK - Configurações{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/configuracoes.css') }}">
{% endblock %}

{% block content %}
<div class="configuracoes-container">
    <div class="configuracoes-content">
        <!-- Header -->
        <div class="config-header">
            <h2>Configurações do Sistema</h2>
            <p>Gerencie lixeiras e configurações do sistema</p>
        </div>

        <!-- Formulário para Adicionar Lixeira -->
        <div class="card">
            <h3 class="card-header">Adicionar Nova Lixeira</h3>
            <form id="form-nova-lixeira" class="form-lixeira">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="localizacao">Localização *</label>
                        <input type="text" id="localizacao" name="localizacao" required 
                               placeholder="Ex: Asa Norte - Bloco A">
                    </div>

                    <div class="form-group">
                        <label for="tipo_material_id">Tipo de Material</label>
                        <select id="tipo_material_id" name="tipo_material_id">
                            <option value="">Selecione...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="parceiro_id">Parceiro</label>
                        <select id="parceiro_id" name="parceiro_id">
                            <option value="">Selecione...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="nivel_preenchimento">Nível de Preenchimento (%)</label>
                        <input type="number" id="nivel_preenchimento" name="nivel_preenchimento" 
                               min="0" max="100" step="0.1" value="0" required>
                    </div>

                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" name="status">
                            <option value="OK">OK</option>
                            <option value="CHEIA">CHEIA</option>
                            <option value="QUEBRADA">QUEBRADA</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="latitude">Latitude</label>
                        <input type="number" id="latitude" name="latitude" 
                               step="0.0001" placeholder="Ex: -15.7801">
                    </div>

                    <div class="form-group">
                        <label for="longitude">Longitude</label>
                        <input type="number" id="longitude" name="longitude" 
                               step="0.0001" placeholder="Ex: -47.9292">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">Adicionar Lixeira</button>
                    <button type="reset" class="btn-secondary">Limpar</button>
                </div>

                <div id="form-mensagem" class="form-mensagem" style="display: none;"></div>
            </form>
        </div>

        <!-- Formulário para Adicionar Coleta -->
        <div class="card">
            <h3 class="card-header">Adicionar Nova Coleta</h3>
            <form id="form-nova-coleta" class="form-lixeira">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="coleta-lixeira-id">Lixeira *</label>
                        <select id="coleta-lixeira-id" name="lixeira_id" required>
                            <option value="">Selecione uma lixeira...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="coleta-data-hora">Data/Hora *</label>
                        <input type="datetime-local" id="coleta-data-hora" name="data_hora" required>
                    </div>

                    <div class="form-group">
                        <label for="coleta-volume">Volume (KG) *</label>
                        <input type="number" id="coleta-volume" name="volume_estimado" 
                               min="0" step="0.01" required placeholder="Ex: 100.5">
                    </div>

                    <div class="form-group">
                        <label for="coleta-tipo-operacao">Tipo de Operação</label>
                        <select id="coleta-tipo-operacao" name="tipo_operacao">
                            <option value="">Selecione...</option>
                            <option value="Coleta Avulsa">Coleta Avulsa</option>
                            <option value="Campanha">Campanha</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="coleta-km">KM Percorrido</label>
                        <input type="number" id="coleta-km" name="km_percorrido" 
                               min="0" step="0.1" placeholder="Ex: 25.5">
                    </div>

                    <div class="form-group">
                        <label for="coleta-preco-combustivel">Preço Combustível (R$/L)</label>
                        <input type="number" id="coleta-preco-combustivel" name="preco_combustivel" 
                               min="0" step="0.01" placeholder="Ex: 6.89">
                    </div>

                    <div class="form-group">
                        <label for="coleta-lucro-kg">Lucro por KG (R$)</label>
                        <input type="number" id="coleta-lucro-kg" name="lucro_por_kg" 
                               min="0" step="0.01" placeholder="Ex: 1.00">
                    </div>

                    <div class="form-group">
                        <label for="coleta-tipo-coletor">Tipo de Coletor</label>
                        <select id="coleta-tipo-coletor" name="tipo_coletor_id">
                            <option value="">Selecione...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="coleta-parceiro">Parceiro</label>
                        <select id="coleta-parceiro" name="parceiro_id">
                            <option value="">Selecione...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="coleta-emissao-mtr">Emissão de MTR</label>
                        <select id="coleta-emissao-mtr" name="emissao_mtr">
                            <option value="false">Não</option>
                            <option value="true">Sim</option>
                        </select>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">Adicionar Coleta</button>
                    <button type="reset" class="btn-secondary">Limpar</button>
                </div>

                <div id="coleta-form-mensagem" class="form-mensagem" style="display: none;"></div>
            </form>
        </div>

        <!-- Lista de Lixeiras Existentes -->
        <div class="card">
            <h3 class="card-header">Lixeiras Cadastradas</h3>
            <div id="lista-lixeiras" class="lista-lixeiras">
                <div class="loading-message">Carregando lixeiras...</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/configuracoes.js') }}"></script>
{% endblock %}

