{% extends "base.html" %}

{% block title %}Dashboard-TRONIK - Monitoramento{% endblock %}

{% block content %}
<!-- Left Panel - Dashboard -->
<div class="left-panel">
    <!-- Alerts -->
    <div class="alerts-bar" id="alerts-bar" style="display: none;">
        <div class="alert-icon">!</div>
        <div class="alert-content">
            <div class="alert-title" id="alert-title"></div>
            <div class="alert-message" id="alert-message"></div>
        </div>
    </div>

    <!-- Stats and Filters -->
    <div class="controls-row">
        <!-- Stats -->
        <div class="stats-card">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="stat-total">0</div>
                    <div class="stat-label">Total</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-nivel-medio">0%</div>
                    <div class="stat-label">Nível Médio</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value alert" id="stat-alertas">0</div>
                    <div class="stat-label">Alertas</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-coletas-hoje">0</div>
                    <div class="stat-label">Coletas Hoje</div>
                </div>
            </div>
        </div>
        
        <!-- Filters -->
        <div class="filters-card">
            <div class="filters-row">
                <div class="filter-group">
                    <div class="filter-label">Status</div>
                    <select class="filter-select" id="filter-status">
                        <option value="">Todos</option>
                        <option value="ativo">Normal</option>
                        <option value="alerta">Atenção</option>
                        <option value="manutencao">Manutenção</option>
                    </select>
                </div>
                <div class="filter-group">
                    <div class="filter-label">Buscar</div>
                    <input type="text" class="filter-input" id="filter-busca" placeholder="ID ou nome...">
                </div>
            </div>
        </div>
    </div>

    <!-- Bins Grid -->
    <div class="bins-section">
        <div class="bins-header">
            <h2 class="bins-title">Monitoramento de Lixeiras</h2>
        </div>
        
        <div class="bins-grid" id="bins-grid">
            <!-- Lixeiras serão inseridas aqui via JavaScript -->
            <div class="loading-message">Carregando lixeiras...</div>
        </div>
    </div>
</div>

<!-- Right Panel - History -->
<div class="right-panel">
    <div class="history-header">
        <h2 class="history-title">Histórico de Coletas</h2>
        <div class="history-filter">
            <input type="date" class="date-input" id="filter-date" value="">
            <button class="btn-exportar" id="btn-relatorio">Relatório</button>
        </div>
    </div>
    
    <div class="table-scroll">
        <table id="history-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Local</th>
                    <th>Hora</th>
                    <th>Nível</th>
                    <th>Vol.</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody id="history-tbody">
                <tr>
                    <td colspan="6" style="text-align: center;">Carregando histórico...</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Modal de Detalhes -->
<div class="modal-overlay" id="modal-overlay" style="display: none;">
    <div class="modal-container">
        <div class="modal-header">
            <h2 id="modal-title">Detalhes da Lixeira</h2>
            <button class="modal-close" id="modal-close">&times;</button>
        </div>
        <div class="modal-body" id="modal-body">
            <!-- Conteúdo será preenchido via JavaScript -->
        </div>
    </div>
</div>
{% endblock %}
